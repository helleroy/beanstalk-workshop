<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>AWS Beanstalk</title>

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <link rel="stylesheet" href="custom.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>AWS Elastic Beanstalk</h1>
                    <span class="authors">av Tomas Fagerbekk, Henrik Hellerøy, Gustav Karlsson</span>
                </section>
                <section>
                    <h2>Agenda</h2>
                    <ul>
                        <li class="fragment">Hva er det?</li>
                        <li class="fragment">Hvorfor bruke det?</li>
                        <li class="fragment">Hvordan bruke det? (workshop)</li>
                        <li class="fragment">Spørsmål</li>
                    </ul>
                </section>
                <section>
                    <h2>Hva er Beanstalk?</h2>
                    <blockquote>
                        "By using Elastic Beanstalk, developers can focus on developing their application and are freed from deployment-oriented tasks, such as provisioning servers, setting up load balancing, or managing scaling."
                    </blockquote>
                    <aside class="notes">
                        PaaS - automatisk setup av de "vanlige" tingene.
                        <ul>
                            <li>EC2 instances, ELB, RDS, Roles, Keys, (S3 bucket for storing application), Alarms, SNS</li>
                        </ul>
                        Help commands (eb logs, eb deploy)
                    </aside>
                </section>
                <section>
                    <h2>Hvorfor bruke Beanstalk?</h2>
                    <ul>
                        <li class="fragment">"Gratis"</li>
                        <li class="fragment">Enklere</li>
                        <li class="fragment">Raskere</li>
                        <li class="fragment">Like customizable</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>Gratis: Betaler kun for den underliggende infrastrukturen</li>
                            <li>Enklere: Sammenlign den kommende workshoppen med det vi gjorde i vår. Gir også mulighet for bruk av CodeDeploy for automatisk bygg og deploys.</li>
                            <li>Raskere: Selv om du kan alt fra før, er dette mindre arbeid. Du kan også bruke eb clone for å duplisere et miljø.</li>
                            <li>Customizable: Du kan endre komponentene med ```eb config``` eller via vanlige måter (du har fortsatt full kontroll over EC2-instanser osv.</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>Hvorfor IKKE bruke Beanstalk?</h2>
                    <ul>
                        <li class="fragment">Hvis språk/stack du vil bruke <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.platforms.html">ikke er støttet</a></li>
                        <li class="fragment">OpsWorks bedre alternativ for stor infrastruktur</li>
                        <li class="fragment">Hvis du allerede har infrastrukturen oppe</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>Det er ikke -så- mange platformer som støttes, men de jobber visstnok på å utvide det</li>
                            <li>AWS OpsWorks gir mer granularitet og kontroll</li>
                            <li>Beanstalk hjelper deg først og fremst med oppsett og deploy. Hvis du allerede har infrastrukturen oppe, gir det lite gevinst å skifte.</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>Hvordan bruke Beanstalk (workshop)</h2>
                    <ul>
                        <li class="fragment">Enkel Java-applikasjon med Lastbalanserer</li>
                        <li class="fragment">Deploy</li>
                        <li class="fragment">Autoskalering</li>
                        <li class="fragment">Logging til Slack</li>
                        <li class="fragment">
                            <a href="https://github.com/helleroy/beanstalk-workshop">https://github.com/helleroy/beanstalk-workshop</a>
                        </li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>Java-app = EC2 + ELB</li>
                            <li>Logging til Slack = Lambda</li>
                            <li>Det blir også CloudWatch alarmer (Legges til automatisk)</li>
                        </ul>
                    </aside>
                    
                </section>

                <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Vil <code>eb deploy</code> gi nedetid?</span>
                    <span class="answer fragment">A: Nei, gitt at du har minst to instanser.
                    <aside class="notes">
                        <p>Den melder ut fra lastbalanserer, oppdaterer og melder inn én instans av gangen (konfigurerbart).</p>

                        <p>Resultat av dette er at er at man kan oppleve både ny og gammel versjon av nettstedet (med mindre man har sticky sessions)</p>
                    </aside>
                </section>

                 <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Tar <code>eb deploy</code> mine filer slik de er akkurat nå?</span>
                    <span class="answer fragment">A: Nei, den tar siste commit.</span>
                    <aside class="notes">
                        Du kan også bruke <code>eb deploy --staged</code> for å inkludere det som er i git stage
                    </aside>
                </section>

                <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Kan jeg sette hvilke environment variables instansene skal ha?</span>
                    <span class="answer fragment">A: Ja, med <code>--envvars</code> flag under <code>eb create</code>. eller med <code>eb setenv</code></span>
                    <aside class="notes">
                        <ul>
                            <li>e.g. eb create --envvars BUCKET=test.data,LOGFILE=/var/logs/app.log</li>
                            <li>e.g. eb setenv foo=bar</li>
                            <li>Og vise med eb printenv</li>
                        </ul>
                        
                    </aside>
                </section>

                <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Kan jeg sette de ulike komponentene i ulike subnets?</span>
                    <span class="answer fragment">A: Ja, med <code>--vpc.dbsubnets</code>, <code>--vpc.ec2subnets</code> og <code>--vpc.elbsubnets</code> flag under <code>eb create</code>.</span>
                    <aside class="notes">
                        e.g. eb create --envvars BUCKET=test.data,LOGFILE=/var/logs/app.log
                    </aside>
                </section>

                 <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Hvis jeg allerede har en app, kan jeg konvertere den til Beanstalk?</span>
                    <span class="answer fragment">A: Nei. Du må "konvertere" den manuelt, dvs. sette opp appen via BeanStalk, og deretter ta ned gamle infrastrukturen.</span>
                </section>

                <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Hvordan bruker jeg Beanstalk med utvikling-, -test og prodmiljøer?</span>
                    <span class="answer fragment">A: Med <code>eb clone</code> kan du klone miljøer, og med <code>eb use</code> kan du mappe én git branch mot ett miljø.</span>
                    <aside class="notes">eb clone tar <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.managing.clone.html">IKKE med seg endringer gjort via AWS Console (Untatt Beanstalk)</a></aside>

                </section>
                <section>
                    <h2>Spørsmål</h2>
                    <span class="question">Q: Kan jeg knytte min applikasjon mot et spesifikt DNS-navn?</span>
                    <span class="answer fragment">
                        A: Ja, med <code>--cname</code> under <code>eb create</code>. Se <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html">aws docs</a>
                    </span>
                </section>
                <section>
                    <h1>Flere spørsmål?</h1>
                </section>
                <section>
                    <h1>Konklusjon</h1>
                    <ul>
                        <li>EB er SYKT FETT AZZ!</li>
                    </ul>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                history: true,
                controls: false,

                dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
                ]
            });
        </script>
    </body>
</html>
